<!DOCTYPE html>
<html>

<head>
    <meta Content-Type="text/html" ; charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">

    <!--Khai báo thư viện bootstrap và jquery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">

    <!-- Khai báo file CSS của các thành phần -->
    <link rel="stylesheet" type="text/css" href="/component/header_bar/css/mystyle.css">
    <link rel="stylesheet" href="/component/button/button.css">
    <link rel="stylesheet" href="/component/textbox/textbox-1.css">
    <link rel="stylesheet" href="/component/checkbox/checkbox.css">

    <!-- CSS của file html này -->
    <link rel="stylesheet" href="/theodoidonhang/theodoidonhang.css">
    <link rel="stylesheet" href="/component/account_side_menu/account_side_menu.css">


</head>

<body>

    <div id="header_bar"></div>
    <div id="nav_bar"></div>

    <div style="width: 50%;">
        <div class="d-flex justify-content-start align-items-start">

            <div class="menu_container ">
                <!-- Xin chao, <name> -->
                <p class="welcome_p">
                    Xin chào, {{firstname}}
                </p>
                <!-- Contain items -->
                <div class="item_container">
                    <p><a href="/user/profile" style="color:black">Thông tin tài khoản</a></p>
                    <p><a href="/user/orders" style="color:black">Đơn hàng của bạn</a></p>
                    <p><a href="/user/favorite_product" style="color:black">Sản phẩm yêu thích</a></p>
                    <p><a href="/user/delete_account" style="color:black">Xóa hoặc tạm khóa tài khoản</a></p>
                </div>
                <!-- A red line on the right side -->
                <div class="line"> </div>
            </div>



            <!-- Bảng danh sách các đơn hàng -->
            <table class="table table-borderless" style="min-width: 800px; margin: 20px;">
                <!-- Header -->
                <thead>
                    <tr>
                        <th scope="col" style="width:15%">Mã ĐH</th>
                        <th scope="col" style="width:20%">Ngày mua</th>
                        <th scope="col" style="width:30%">Sản phẩm</th>
                        <th scope="col" style="width:15%">Tổng tiền</th>
                        <th scope="col" style="width:20%">Trạng thái đơn hàng</th>
                    </tr>
                </thead>

                <!-- Body -->
                <tbody id="don-hang-list">
                    
                    {{#each data}}
                    <tr class="data-row" onclick="window.location.href='/user/order_detail/{{id_payment}}'">
                        
                        <th scope="row"><p style="color:black">{{id_payment}}</p></td>
                        <td><p style="color:black">{{date_time}}</p></td>
                        <td>
                            <p style="color:black">
                                {{name}}
                            </p>
                        </td>
                        <td><p style="color:black" class="item-price">{{total_price}}đ</p></td>
                        <td><p style="color:black">{{state2}}</p></td>
                    </tr>
                    {{/each}}
            
                </tbody>
                <script type="text/javascript">
                    function addCommas(nStr)
                    {
                        nStr += '';
                        x = nStr.split('.');
                        x1 = x[0];
                        x2 = x.length > 1 ? '.' + x[1] : '';
                        var rgx = /(\d+)(\d{3})/;
                        while (rgx.test(x1)) {
                            x1 = x1.replace(rgx, '$1' + ',' + '$2');
                        }
                        return x1 + x2;
                    }

                    
                    function myFunction() {
                    
                        var x = document.getElementsByClassName("item-price");
                        for( var i=0;i<x.length;i++){
                            x[i].innerHTML = addCommas(x[i].innerHTML );
                        }
                        var y = document.getElementsByClassName("item-ori-price");
                        for(var i=0;i<y.length;i++){
                            y[i].innerHTML = addCommas(y[i].innerHTML );
                        }

                    }
                    myFunction();
                </script>
            </table>
        </div>
        <div class="d-flex justify-content-start"></div>
    </div>

    <div id="footer"></div>

    <script>
        function loadComponent(id, url) {
            $("#" + id).load(url);
        }
        $(document).ready(function () {
            loadComponent("header_bar", "/component/header_bar/header_bar.html");
            loadComponent("nav_bar", "/component/nav_bar/nav_bar.html");
            loadComponent("footer", "/component/footer/footer.html");
        });



    </script>

</body>

</html>